<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="css," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="[TOC] CSS Visual Formatting ModelContaining Block这个block也是个box，box是其内嵌box的containing block。  In general, generated boxes act as containing blocks for descendant boxes; we say that a box “establishes”">
<meta name="keywords" content="css">
<meta property="og:type" content="article">
<meta property="og:title" content="CSS Visual Formatting Model">
<meta property="og:url" content="http://yixiang.pw/2016/06/01/CSS-Visual-Fomatting-Model/index.html">
<meta property="og:site_name" content="yixiang">
<meta property="og:description" content="[TOC] CSS Visual Formatting ModelContaining Block这个block也是个box，box是其内嵌box的containing block。  In general, generated boxes act as containing blocks for descendant boxes; we say that a box “establishes”">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2017-07-22T10:21:23.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CSS Visual Formatting Model">
<meta name="twitter:description" content="[TOC] CSS Visual Formatting ModelContaining Block这个block也是个box，box是其内嵌box的containing block。  In general, generated boxes act as containing blocks for descendant boxes; we say that a box “establishes”">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yixiang.pw/2016/06/01/CSS-Visual-Fomatting-Model/"/>





  <title>CSS Visual Formatting Model | yixiang</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">yixiang</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yixiang.pw/2016/06/01/CSS-Visual-Fomatting-Model/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="周意翔">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yixiang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">CSS Visual Formatting Model</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-06-01T21:53:49+08:00">
                2016-06-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发/" itemprop="url" rel="index">
                    <span itemprop="name">开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>[TOC]</p>
<h1 id="CSS-Visual-Formatting-Model"><a href="#CSS-Visual-Formatting-Model" class="headerlink" title="CSS Visual Formatting Model"></a>CSS Visual Formatting Model</h1><h2 id="Containing-Block"><a href="#Containing-Block" class="headerlink" title="Containing Block"></a>Containing Block</h2><p>这个block也是个box，box是其内嵌box的containing block。</p>
<blockquote>
<p>In general, generated boxes act as containing blocks for descendant boxes; we say that a box “establishes” the containing block for its descendants.<br>Each box is given a position with respect to its containing block, but it is not confined by this containing block; it may overflow.</p>
</blockquote>
<h2 id="Viewport"><a href="#Viewport" class="headerlink" title="Viewport"></a>Viewport</h2><p>页面渲染到canvas上面，用户通过浏览器提供的viewport和页面交互。 Viewport可能比canvas小，浏览器因此需要提供滚动机制。</p>
<h2 id="Elment-Box"><a href="#Elment-Box" class="headerlink" title="Elment, Box"></a>Elment, Box</h2><p>HTML Element首先会映射成为各种类型的box，页面排版是对box的排版。</p>
<ul>
<li>一个Element可能生成多个box，</li>
<li>有的box类似段落的一段，</li>
<li>有的box类似段落的一行，</li>
<li>有的box类似行内的一个字符</li>
</ul>
<h2 id="Block-level-Box-Block-level-element-Block-container-box-Block-box"><a href="#Block-level-Box-Block-level-element-Block-container-box-Block-box" class="headerlink" title="Block-level Box, Block-level element, Block container box, Block box"></a>Block-level Box, Block-level element, Block container box, Block box</h2><h3 id="Block-level-Box"><a href="#Block-level-Box" class="headerlink" title="Block-level Box"></a>Block-level Box</h3><p>从该Box在Container中的显示形式来看。<br>Block-level Box参与BFC，也就是说这些Box是按照垂直方向依次摆放的。</p>
<h3 id="Block-level-element"><a href="#Block-level-element" class="headerlink" title="Block-level element"></a>Block-level element</h3><p>Block-level element (BLE)可能产生多个box，但每个BLE会生成一个principal block-level box。这个主box会包含BLE生成的其它box，这些额外的box会相对于主box进行布局。主box代表整个BLE参与到any positioning scheme。这几个display属性会让元素变成BLE: ‘block’, ‘list-item’, ‘table’.</p>
<h3 id="Block-container-box-Block-box"><a href="#Block-container-box-Block-box" class="headerlink" title="Block container box, Block box"></a>Block container box, Block box</h3><p>从该Box包含的下级Box来看。</p>
<p>Block container box的定义有点绕。把标准里面的描述顺序重排一下，把描述分成两类：一类针对该box内部的子box，另一类针对该box对外界。</p>
<blockquote>
<p>A block container box either contains only block-level boxes or establishes an inline formatting context and thus contains only inline-level boxes.</p>
</blockquote>
<p>上面说明Block container box要么只包含Block-level boxes，要么只包含inline-level boxes，后面这种情况，还专门说建立了一个inline formatting context。那么前一种情况为什么不提会不会建立BFC呢？</p>
<blockquote>
<p>Not all block container boxes are block-level boxes: non-replaced inline blocks and non-replaced table cells are block containers but not block-level boxes.</p>
<p>Except for table boxes and replaced elements, a block-level box is also a block container box.</p>
</blockquote>
<p>上面两段说明inline-block和table cells虽然不是bock-level boxes，但也是block container box。而block-level box也不一定都是block container box。总而言之，block container box主要是看它内部能容纳什么。</p>
<blockquote>
<p>Block-level boxes that are also block containers are called block boxes.</p>
</blockquote>
<p>block boxes的定义。</p>
<h2 id="Block-Formatting-Context"><a href="#Block-Formatting-Context" class="headerlink" title="Block Formatting Context"></a>Block Formatting Context</h2><p>BFC下面的（一级）box都是block-level box (可能是根据子block-level element生成的，或隐式生成的)。</p>
<blockquote>
<p>In a block formatting context, boxes are laid out one after the other, vertically, beginning at the top of a containing block. The vertical distance between two sibling boxes is determined by the ‘margin’ properties. Vertical margins between adjacent block-level boxes in a block formatting context collapse.</p>
</blockquote>
<p>在一个BFC里面，box的左边界和BFC的左边界接触 （或右边）。</p>
<blockquote>
<p>In a block formatting context, each box’s left outer edge touches the left edge of the containing block (for right-to-left formatting, right edges touch). This is true even in the presence of floats (although a box’s line boxes may shrink due to the floats), unless the box establishes a new block formatting context (in which case the box itself may become narrower due to the floats).</p>
</blockquote>
<p>当有Float元素存在时，可以把block-level box进一步看成一堆的line box，它们总是尽量往左靠齐到BFC边界，除非遇到Float。</p>
<p>例子：对于下面的HTML结构，<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"b1"</span>&gt;</span></div><div class="line">    ...</div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"b2"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span></div><div class="line">      ...</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"c2"</span>&gt;</span></div><div class="line">      ...</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.b1</span> &#123;</div><div class="line">  <span class="attribute">border</span>: <span class="number">10px</span> red solid;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.b2</span> &#123;</div><div class="line">  <span class="attribute">border</span>: <span class="number">10px</span> green solid;</div><div class="line">  //width: 300px;</div><div class="line">  <span class="selector-tag">overflow</span>: <span class="selector-tag">hidden</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.c1</span> &#123;</div><div class="line">  <span class="attribute">border</span>: <span class="number">10px</span> blue solid;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.c2</span> &#123;</div><div class="line">  <span class="attribute">border</span>: <span class="number">10px</span> black solid;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">img</span> &#123;</div><div class="line">  <span class="attribute">float</span>: left;</div><div class="line">  //opacity: 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当.b2不使用overflow:hidden建立新的BFC时，布局如下：</p>
<p>!{bfc}[./img/bfc.png “”]</p>
<p>当.b2使用overflow:hidden建立新的BFC时，布局如下：</p>
<p>!{bfc}[./img/new_bfc.png “”]</p>
<p>另外可以注释掉overflow，设置.b2的width小于图片的宽度，这时.b2的内容看上去像是换行开始布局，因为它的宽度覆盖不了图片，因此图片覆盖的部分时空白的。</p>
<p>!{bfc}[./img/small_width.png “”]</p>
<p>可以通过下面的JsFindle去测试这些情况：￼<br><a href="https://jsfiddle.net/hostapd/bhuqqtq9/" target="_blank" rel="external">https://jsfiddle.net/hostapd/bhuqqtq9/</a></p>
<h2 id="如何建立BFC？"><a href="#如何建立BFC？" class="headerlink" title="如何建立BFC？"></a>如何建立BFC？</h2><blockquote>
<p>Floats, absolutely positioned elements, block containers (such as inline-blocks, table-cells, and table-captions) that are not block boxes, and block boxes with ‘overflow’ other than ‘visible’ (except when that value has been propagated to the viewport) establish new block formatting contexts for their contents.</p>
</blockquote>
<ul>
<li>float元素</li>
<li>绝对定位元素</li>
<li>block containers &amp;&amp; !block level box</li>
<li>overflow != visible</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/css/" rel="tag"># css</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2014/12/21/Laravel源码分析-Container/" rel="next" title="Laravel源码分析 - Container">
                <i class="fa fa-chevron-left"></i> Laravel源码分析 - Container
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/09/25/遇到一个Laravel-Dingo-API坑/" rel="prev" title="Laravel + Dingo API 遇到一个小坑">
                Laravel + Dingo API 遇到一个小坑 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="/images/avatar.jpg"
              alt="周意翔" />
          
            <p class="site-author-name" itemprop="name">周意翔</p>
            <p class="site-description motion-element" itemprop="description"></p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#CSS-Visual-Formatting-Model"><span class="nav-number">1.</span> <span class="nav-text">CSS Visual Formatting Model</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Containing-Block"><span class="nav-number">1.1.</span> <span class="nav-text">Containing Block</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Viewport"><span class="nav-number">1.2.</span> <span class="nav-text">Viewport</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Elment-Box"><span class="nav-number">1.3.</span> <span class="nav-text">Elment, Box</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Block-level-Box-Block-level-element-Block-container-box-Block-box"><span class="nav-number">1.4.</span> <span class="nav-text">Block-level Box, Block-level element, Block container box, Block box</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Block-level-Box"><span class="nav-number">1.4.1.</span> <span class="nav-text">Block-level Box</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Block-level-element"><span class="nav-number">1.4.2.</span> <span class="nav-text">Block-level element</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Block-container-box-Block-box"><span class="nav-number">1.4.3.</span> <span class="nav-text">Block container box, Block box</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Block-Formatting-Context"><span class="nav-number">1.5.</span> <span class="nav-text">Block Formatting Context</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如何建立BFC？"><span class="nav-number">1.6.</span> <span class="nav-text">如何建立BFC？</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">周意翔</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
